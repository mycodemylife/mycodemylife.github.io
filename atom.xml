<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mycodemylife.github.io</id>
    <title>七彩旋律</title>
    <updated>2020-08-21T06:19:42.889Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mycodemylife.github.io"/>
    <link rel="self" href="https://mycodemylife.github.io/atom.xml"/>
    <logo>https://mycodemylife.github.io/images/avatar.png</logo>
    <icon>https://mycodemylife.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 七彩旋律</rights>
    <entry>
        <title type="html"><![CDATA[mysql  IPV4  IPV6 转换以及字符截取]]></title>
        <id>https://mycodemylife.github.io/post/mysql-ipv4-ipv6-zhuan-huan-yi-ji-zi-fu-jie-qu/</id>
        <link href="https://mycodemylife.github.io/post/mysql-ipv4-ipv6-zhuan-huan-yi-ji-zi-fu-jie-qu/">
        </link>
        <updated>2020-08-21T06:08:17.000Z</updated>
        <content type="html"><![CDATA[<ol>
<li>
<h3 id="ipv4转数值">IPV4转数值</h3>
</li>
</ol>
<pre><code class="language-mysql">SELECT INET_ATON('192.168.1.1');
</code></pre>
<ol start="2">
<li>
<h3 id="数值转ipv4">数值转IPV4</h3>
</li>
</ol>
<pre><code class="language-mysql">SELECT INET_NTOA('3232235777');
</code></pre>
<ol start="3">
<li>
<h3 id="ipv6转数值">IPV6转数值</h3>
</li>
</ol>
<pre><code class="language-mysql">SELECT HEX(INET6_ATON('123:33:1:3:2:3:4:5')) from DUAL;
</code></pre>
<ol start="4">
<li>
<h3 id="数值转ipv6">数值转IPV6</h3>
</li>
</ol>
<pre><code class="language-mysql">SELECT INET6_NTOA(UNHEX(01230033000100030002000300040005)) from DUAL;
</code></pre>
<ol start="5">
<li>
<h3 id="字符截取">字符截取</h3>
</li>
</ol>
<pre><code class="language-mysql">select substring_index(substring_index('ftp://206.189.90.62/sensi.sh', '/',3),'/',-1) from dual
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[pip从国内安装]]></title>
        <id>https://mycodemylife.github.io/post/pip-cong-guo-nei-an-zhuang/</id>
        <link href="https://mycodemylife.github.io/post/pip-cong-guo-nei-an-zhuang/">
        </link>
        <updated>2020-08-21T06:05:22.000Z</updated>
        <content type="html"><![CDATA[<pre><code>pip install abc -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com
</code></pre>
<p>-i  指定源</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mysql 自带加密函数]]></title>
        <id>https://mycodemylife.github.io/post/mysql-zi-dai-jia-mi-han-shu/</id>
        <link href="https://mycodemylife.github.io/post/mysql-zi-dai-jia-mi-han-shu/">
        </link>
        <updated>2020-08-21T05:58:54.000Z</updated>
        <content type="html"><![CDATA[<ol>
<li>
<h2 id="加密">加密</h2>
</li>
</ol>
<pre><code class="language-mysql">SELECT Hex(AES_ENCRYPT(&quot;hello world&quot;,&quot;1q2w3e4r5t&quot;));
</code></pre>
<ol start="2">
<li>
<h2 id="解密">解密</h2>
</li>
</ol>
<pre><code class="language-mysql">SELECT AES_DECRYPT(UNHEX(&quot;79A3B96BF32FABEAB0BD03D56044FFDF&quot;),&quot;1q2w3e4r5t&quot;);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[oracle关闭和重启]]></title>
        <id>https://mycodemylife.github.io/post/oracle-guan-bi-he-chong-qi/</id>
        <link href="https://mycodemylife.github.io/post/oracle-guan-bi-he-chong-qi/">
        </link>
        <updated>2020-08-21T05:47:39.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-sh">启动：
1、先登录服务器后，切换到oracle用户状态下： su oracle

2、检查oracle监听器运行状态：lsnrctl status命令查看。

表示监听没有启动。

3、执行启动监听，通过命令：lsnrctl start （lsnrctl stop 关闭监听）

表示端口已启动成功。

4、如果启动报错，listener.ora文件打开，调整HOST IP

5、进入sqlplus，命令：sqlplus /nolog

6、管理员sysdba权限登陆oracle：conn /as sysdba

7、启动服务（实例）：startup


重启：先关闭再连接
sqlplus sys/'pass!'@ORCL as sysdba

shutdown immediate;

退出 exit

sqlplus /nolog

conn /as sysdba

startup
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[oracle  spool]]></title>
        <id>https://mycodemylife.github.io/post/oracle-spool/</id>
        <link href="https://mycodemylife.github.io/post/oracle-spool/">
        </link>
        <updated>2020-08-21T05:44:47.000Z</updated>
        <content type="html"><![CDATA[<p>可用于导出数据</p>
<pre><code class="language-sh">#!/bin/sh
export NLS_LANG='SIMPLIFIED CHINESE_CHINA.UTF8'
ORA_NAME=dbname
ORA_USER=username
ORA_PASS=pass
sqlplus -S ${ORA_USER}/${ORA_PASS} &lt;&lt; EOF
set echo off;
set feedback off;
set newpage none;
set verify off;
set pagesize 0;
set term off;
set trims on;
set linesize 10000;
set heading off;
set timing off;
set numwidth 38;
SPOOL /tmp/demo.sql;
SELECT
        'insert into Idcard(name,idNumMd5,idNum,createTime,flag) values(&quot;'||
        DWMC|| '&quot;,&quot;' ||
        md5(ZJHM)|| '&quot;,&quot;' ||
        ZJHM|| '&quot;,now(),&quot;' ||
        JGDM||
        '&quot;);'
FROM
       Table
WHERE
        ZT=1
        and YL1=200;
SPOOL OFF;
exit
EOF
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHP 调用https类型webservice接口]]></title>
        <id>https://mycodemylife.github.io/post/php-webservice/</id>
        <link href="https://mycodemylife.github.io/post/php-webservice/">
        </link>
        <updated>2020-08-20T09:26:04.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-php">$opts = array (
			'ssl' =&gt; array (
					'ciphers' =&gt; 'RC4-SHA',
					'verify_peer' =&gt; false,
					'verify_peer_name' =&gt; false 
			) 
	);
	// SOAP 1.2 client
	$params = array (
			'encoding' =&gt; 'UTF-8',
			'verifypeer' =&gt; false,
			'verifyhost' =&gt; false,
			'soap_version' =&gt; SOAP_1_1,
			'trace' =&gt; 1,
			'exceptions' =&gt; 1,
			&quot;connection_timeout&quot; =&gt; 180,
			'stream_context' =&gt; stream_context_create ( $opts ),
			'local_cert' =&gt; $local_cert, // client证书信息
			'passphrase' =&gt; 'client'  // 密码
		);
 
	;
	$soap = new SoapClient ( $wsdl, $params );
例子：
	&lt;?php
header(&quot;content-type:text/html;charset=utf-8&quot;);
try {
	// 要请求的内容 打成xml
	//xml加密
	//密钥 
	//偏移量 
	//随机数 
	//用户
    $client = new SoapClient(&quot;https://192.168.3.12:8866/epic/query?wsdl&quot;,
        array(
            &quot;stream_context&quot; =&gt; stream_context_create(
                array(
                    'ssl' =&gt; array(
                        'verify_peer' =&gt; false,
                        'verify_peer_name' =&gt; false,
                    )
                )
            )
        )
    );
    //print_r($client-&gt;__getFunctions());
    //print_r($client-&gt;__getTypes());

    $parm = array('content' =&gt; 'inKkcE+e4h+1q5Rpm8hAqw0Ph8yYx3hlhUO/1dJqrhm4Y4p/ot7yhgnzg5cQj+3Whac+3gx5yfs1KVX/1U9TwugtKtMdRFwPxPbF27i+BmAh3gZN6SSMCvbvVmi2EBRgRxJEHBMrk52DCpUtC21nn4ECvkBUKBcf0vCnAVfB4Xs=', 'contentHash' =&gt; '0lh0DJh3A2j1ei7NhEAnYA==', 'random' =&gt; 'AUMIxMlN4IoZTuh3Gh6y', 'loginName' =&gt; 'glpt_user01');
    $result = $client-&gt;epic_ent_person_relation($parm);
    //print_r($result);

    //将stdclass object的$result转换为array
    $result = get_object_vars($result);
    //输出结果 
    echo $result[&quot;return&quot;];
   

} catch (SOAPFault $e) {
    print $e;
}
?&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[php证件照换底色]]></title>
        <id>https://mycodemylife.github.io/post/php_change/</id>
        <link href="https://mycodemylife.github.io/post/php_change/">
        </link>
        <updated>2020-08-20T09:08:27.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-php">&lt;?php
//背景图和原图需要保持宽高要保持一样，这里的示例原图用的是蓝色背景
init();
function init(){
    $old = '1.png';
    $new = '2.png';
    //创建一个png透明图
    $img = imagecreatefrompng($old);
    setpng($img,$old,$new);
}
function setpng($imgid,$filename,$savename){
    $bg = 'bg.png';//背景图
    $new = imagecreatefrompng($bg);//创建一个png透明图
    list($width,$height)=getimagesize($filename);//获取长和宽
    $white = imagecolorallocate($imgid,1,155,215);//选择一个替换颜色。这里是绿色
    cleancolor($imgid,$white);
    imagecolortransparent($imgid,$white);//把选择的颜色替换成透明
    imagecopymerge($new,$imgid,0,0,0,0,$width,$height,100);//合并图片
    imagepng($new,$savename);//保存图片
    imagedestroy($imgid);//销毁
    imagedestroy($new);
    echo '&lt;img src=&quot;'.$savename.'&quot;&gt;';
}
function cleancolor($imgid,$color){
    $width = imagesx($imgid);//获取宽
    $height = imagesy($imgid);//获取高
    for($i=0;$i&lt;$width;$i++){
        for($k=0;$k&lt;$height;$k++){
            //对比每一个像素
            $rgb = imagecolorat($imgid,$i,$k);
            $r = ($rgb &gt;&gt; 16)&amp;0xff;//取R
            $g = ($rgb &gt;&gt; 8)&amp;0xff;//取G
            $b = $rgb&amp;0xff;//取B
            $randr = 1.5;
            $randg = 1;
            $randb=1;
            //蓝色RGB大致的位置。替换成绿色
            if($r&lt;=65*$randr &amp;&amp; $g&lt;=225*$randg &amp;&amp; $b&lt;=255*$randb &amp;&amp; $b*$randb&gt;=100){
                //如果能够精确的计算出要保留位置的，这里可以写绝对的数字
                if($i&gt;=$width/2 &amp;&amp; $i&lt;=$width/2 &amp;&amp; $k&gt;=$height/2 &amp;&amp; $k&lt;=$height/2){
                    
                }else{
                    //改变颜色
                    imagesetpixel($imgid,$i,$k,$color);
                }
            }
        }
    }
}

$old指的是要处理的图片，指定为png格式
$new指的是处理后输出的图片名
$bg指的是背景图
</code></pre>
<p>😘 Enjoy~</p>
]]></content>
    </entry>
</feed>