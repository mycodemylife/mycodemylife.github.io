<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>centos6防火墙 | 七彩旋律</title>

<link rel="shortcut icon" href="https://mycodemylife.github.io/favicon.ico?v=1597991632245">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://mycodemylife.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            七彩旋律
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1597991632245" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    centos6防火墙
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2020-08-21 ·
                    </time>
                    
                        <a href="https://mycodemylife.github.io/tag/tp6gu5J5O/" class="post-tags">
                            # linux
                        </a>
                    
                </div>
                <div class="post-content">
                    <pre><code class="language-shell"> #清除预设表filter中的所有规则链的规则
   iptables -F
   #清除预设表filter中使用者自定链中的规则
   iptables -X
   #保存iptables配置
   service iptables save
   #重启iptables服务
   service iptables restart
   #iptables服务状态
   service iptables status
   #iptables服务启动
   service iptables start
   #iptables服务停止
   service iptables stop
   #查看iptables规则
   iptables -L -n
   #查看iptables规则文件
   cat /etc/sysconfig/iptables
   #设定预设规则
   iptables -P INPUT DROP
   iptables -P OUTPUT ACCEPT
   iptables -P FORWARD DROP
   #开启22端口
   iptables -A INPUT -p tcp --dport 22 -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT
   #关闭22端口 iptables -D INPUT -p tcp --dport 22 -j ACCEPT
   #开启常用端口
   iptables -A INPUT -p tcp --dport 80 -j ACCEPT
   iptables -A INPUT -p tcp --dport 3306 -j ACCEPT
   #iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT
   #iptables -A OUTPUT -p tcp --sport 3306 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 20 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 21 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 10000 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 25 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 110 -j ACCEPT
   #iptables -A INPUT -p udp --dport 53 -j ACCEPT
   #允许ping
   iptables -A INPUT -p icmp -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -p icmp -j ACCEPT
   #允许loopback
   iptables -A INPUT -i lo -p all -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -o lo -p all -j ACCEPT
   #屏蔽指定ip
   #iptables -A INPUT -p tcp -s 192.168.10.1 -j DROP
   #减少不安全的端口连接
   #iptables -A OUTPUT -p tcp --sport 31337 -j DROP
   #iptables -A OUTPUT -p tcp --dport 31337 -j DROP
   #允许某个IP远程连接
   #iptables -A INPUT -s 192.168.10.1 -p tcp --dport 22 -j ACCEPT
   #允许某个网段的IP远程连接
   iptables -A INPUT -s 192.168.10.0/24 -p tcp --dport 22 -j ACCEPT
   #允许指定网段通过、指定网口通过SSH连接本机
   #iptables -A INPUT -i eth0 -p tcp -s 192.168.10.0/24 --dport 22 -m state --state NEW,ESTABLESHED -j ACCEPT
   #iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT
   #iptables -A INPUT -i eth0 -p tcp -s 192.168.10.0/24 --dport 22 -m state --state ESTABLESHED -j ACCEPT
   #iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
   #开启转发功能
   #iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT
   #iptables -A FORWARD -i eth1 -o eh0 -j ACCEPT
   #丢弃坏的TCP包
   #iptables -A FORWARD -p TCP ! --syn -m state --state NEW -j DROP
   #处理IP碎片数量,防止攻击,允许每秒100个
   #iptables -A FORWARD -f -m limit --limit 100/s --limit-burst 100 -j ACCEPT
   #设置ICMP包过滤,允许每秒1个包,限制触发条件是10个包
   #iptables -A FORWARD -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT
   #丢弃非法连接
   iptables -A INPUT -m state --state INVALID -j DROP
   iptables -A OUTPUT -m state --state INVALID -j DROP
   iptables -A FORWARD -m state --state INVALID -j DROP
   #允许所有已经建立的和相关的连接
   iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
   iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT


－－###############配置NAT表防火墙###############

   #查看NAT表规则
   iptables -t nat -L
   #清除NAT规则
   iptables -F -t nat
   iptables -X -t nat
   iptables -Z -t nat
   #防止外网用内网IP欺骗
   #iptables -t nat -A PREROUTING -i eth0 -s 10.0.0.0/8 -j DROP
   #iptables -t nat -A PREROUTING -i eth0 -s 172.16.0.0/12 -j DROP
   #iptables -t nat -A PREROUTING -i eth0 -s 192.168.0.0/16 -j DROP
   #禁止与某个IP的所有连接
   #iptables -t nat -A PREROUTING -d 192.168.10.1 -j DROP
   #禁用80端口
   #iptables -t nat -A PREROUTING -p tcp --dport 80 -j DROP
   #禁用某个IP的80端口
   #iptables -t nat -A PREROUTING -p tcp --dport 21 -d 192.168.10.1 -j DROP
</code></pre>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://mycodemylife.github.io/post/centos7-fang-huo-qiang/" class="post-title gt-a-link">
                    centos7防火墙
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        一闪一闪亮晶晶   Powered by 七彩旋律   @2020
    </div>
    
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
