<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>centos6防火墙 | 七彩旋律</title>

<link rel="shortcut icon" href="https://mycodemylife.github.io/favicon.ico?v=1598513759163">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://mycodemylife.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<script src="https://cdn.jsdelivr.net/gh/mycodemylife/mycodemylife.github.io/media/scripts/index.js"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            七彩旋律
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1598513759163" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    centos6防火墙
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2020-08-21 ·
                    </time>
                    
                        <a href="https://mycodemylife.github.io/tag/tp6gu5J5O/" class="post-tags">
                            # linux
                        </a>
                    
                </div>
                <div class="post-content">
                    <pre><code class="language-shell"> #清除预设表filter中的所有规则链的规则
   iptables -F
   #清除预设表filter中使用者自定链中的规则
   iptables -X
   #保存iptables配置
   service iptables save
   #重启iptables服务
   service iptables restart
   #iptables服务状态
   service iptables status
   #iptables服务启动
   service iptables start
   #iptables服务停止
   service iptables stop
   #查看iptables规则
   iptables -L -n
   #查看iptables规则文件
   cat /etc/sysconfig/iptables
   #设定预设规则
   iptables -P INPUT DROP
   iptables -P OUTPUT ACCEPT
   iptables -P FORWARD DROP
   #开启22端口
   iptables -A INPUT -p tcp --dport 22 -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT
   #关闭22端口 iptables -D INPUT -p tcp --dport 22 -j ACCEPT
   #开启常用端口
   iptables -A INPUT -p tcp --dport 80 -j ACCEPT
   iptables -A INPUT -p tcp --dport 3306 -j ACCEPT
   #iptables -A OUTPUT -p tcp --sport 80 -j ACCEPT
   #iptables -A OUTPUT -p tcp --sport 3306 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 20 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 21 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 10000 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 25 -j ACCEPT
   #iptables -A INPUT -p tcp --dport 110 -j ACCEPT
   #iptables -A INPUT -p udp --dport 53 -j ACCEPT
   #允许ping
   iptables -A INPUT -p icmp -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -p icmp -j ACCEPT
   #允许loopback
   iptables -A INPUT -i lo -p all -j ACCEPT
   #如果OUTPUT设置成DROP需要添加 iptables -A OUTPUT -o lo -p all -j ACCEPT
   #屏蔽指定ip
   #iptables -A INPUT -p tcp -s 192.168.10.1 -j DROP
   #减少不安全的端口连接
   #iptables -A OUTPUT -p tcp --sport 31337 -j DROP
   #iptables -A OUTPUT -p tcp --dport 31337 -j DROP
   #允许某个IP远程连接
   #iptables -A INPUT -s 192.168.10.1 -p tcp --dport 22 -j ACCEPT
   #允许某个网段的IP远程连接
   iptables -A INPUT -s 192.168.10.0/24 -p tcp --dport 22 -j ACCEPT
   #允许指定网段通过、指定网口通过SSH连接本机
   #iptables -A INPUT -i eth0 -p tcp -s 192.168.10.0/24 --dport 22 -m state --state NEW,ESTABLESHED -j ACCEPT
   #iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT
   #iptables -A INPUT -i eth0 -p tcp -s 192.168.10.0/24 --dport 22 -m state --state ESTABLESHED -j ACCEPT
   #iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
   #开启转发功能
   #iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT
   #iptables -A FORWARD -i eth1 -o eh0 -j ACCEPT
   #丢弃坏的TCP包
   #iptables -A FORWARD -p TCP ! --syn -m state --state NEW -j DROP
   #处理IP碎片数量,防止攻击,允许每秒100个
   #iptables -A FORWARD -f -m limit --limit 100/s --limit-burst 100 -j ACCEPT
   #设置ICMP包过滤,允许每秒1个包,限制触发条件是10个包
   #iptables -A FORWARD -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT
   #丢弃非法连接
   iptables -A INPUT -m state --state INVALID -j DROP
   iptables -A OUTPUT -m state --state INVALID -j DROP
   iptables -A FORWARD -m state --state INVALID -j DROP
   #允许所有已经建立的和相关的连接
   iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
   iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT


－－###############配置NAT表防火墙###############

   #查看NAT表规则
   iptables -t nat -L
   #清除NAT规则
   iptables -F -t nat
   iptables -X -t nat
   iptables -Z -t nat
   #防止外网用内网IP欺骗
   #iptables -t nat -A PREROUTING -i eth0 -s 10.0.0.0/8 -j DROP
   #iptables -t nat -A PREROUTING -i eth0 -s 172.16.0.0/12 -j DROP
   #iptables -t nat -A PREROUTING -i eth0 -s 192.168.0.0/16 -j DROP
   #禁止与某个IP的所有连接
   #iptables -t nat -A PREROUTING -d 192.168.10.1 -j DROP
   #禁用80端口
   #iptables -t nat -A PREROUTING -p tcp --dport 80 -j DROP
   #禁用某个IP的80端口
   #iptables -t nat -A PREROUTING -p tcp --dport 21 -d 192.168.10.1 -j DROP
</code></pre>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://mycodemylife.github.io/post/centos7-fang-huo-qiang/" class="post-title gt-a-link">
                    centos7防火墙
                </a>
            </div>
        

        

        
            
                <script src="https://cdn.bootcdn.net/ajax/libs/layer/3.1.1/layer.min.js"></script>
<link href="https://cdn.bootcdn.net/ajax/libs/layer/3.1.1/theme/moon/style.min.css" rel="stylesheet">
<button class="mybutton" onclick="show()">赞赏支持</button>
<script type="text/javascript"> 
function show(){
	var dshtml = "<p style='text-align: center;font-size: 24px;font-weight: 500;'>喝咖啡的钱有着落了</p><div class='zsshow'><div style='width: 45%;'><img src='https://cdn.jsdelivr.net/gh/mycodemylife/mycodemylife.github.io/images/wx.png'><div><svg style='width: 50px;height:30px;' viewBox='0 0 1076 1024'><path d='M410.493712 644.226288c-64.448471 36.97706-74.006881-20.759958-74.006881-20.759958l-80.772173-193.983933c-31.078562-92.178305 26.897497-41.56191 26.897498-41.561909s49.746372 38.732181 87.50193 62.333712c37.732946 23.602608 80.745253 6.927882 80.745254 6.927882l528.043743-250.842313C881.479874 81.578667 720.547129 0 538.352656 0 241.013636 0 0 217.098768 0 484.919453c0 154.046856 79.806318 291.154103 204.11518 380.019214L181.698086 997.56551s-10.92805 38.720336 26.945952 20.759958c25.808892-12.243853 91.603314-56.122953 130.768353-82.82771 61.570288 22.083298 128.651441 34.345455 198.970414 34.345455 297.315331 0 538.378498-217.098768 538.378499-484.924837 0-77.573115-20.313102-150.8338-56.295235-215.861568-168.236416 104.176656-559.545472 346.282128-609.973434 375.167327z' fill='#00cc22'></path></svg>微信</div></div><div style='width: 45%;'><img src='https://cdn.jsdelivr.net/gh/mycodemylife/mycodemylife.github.io/images/zfb.png'><div><svg style='width: 50px;height:30px;' viewBox='0 0 1024 1024'><path d='M1023.795 853.64v6.348a163.807 163.807 0 0 1-163.807 163.807h-696.18A163.807 163.807 0 0 1 0 859.988v-696.18A163.807 163.807 0 0 1 163.807 0h696.181a163.807 163.807 0 0 1 163.807 163.807V853.64z' fill='#009FE9'></path><path d='M844.836 648.267c-40.952-14.333-95.623-34.809-156.846-57.128a949.058 949.058 0 0 0 90.094-222.573H573.325V307.14h245.711v-43.41l-245.71 2.458V143.33H472.173c-18.223 0-21.704 20.476-21.704 20.476v102.38H204.759v40.952h245.71v61.427H245.712v40.952h409.518a805.522 805.522 0 0 1-64.909 148.246c-128.384-42.795-266.186-77.604-354.233-55.08a213.564 213.564 0 0 0-112.003 63.27c-95.418 116.917-26.21 294.034 175.274 294.034 119.989 0 236.087-67.366 325.771-177.73 134.322 65.932 398.666 176.297 398.666 176.297V701.3s-32.352-4.095-178.96-53.033z m-563.702 144.97c-158.893 0-204.759-124.699-126.336-194.112a191.86 191.86 0 0 1 90.913-46.276c93.575-10.238 189.811 35.629 293.624 86.614-74.941 94.598-166.674 153.774-258.2 153.774z' fill='#FFFFFF'></path></svg>支付宝</div></div></div>"
	layer.open({content:dshtml,btn: '残忍拒绝',area: '50%',offset: '100px'});
}
</script>
<!--PC和WAP自适应版-->
<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cys0NKu99"></script>
  <style>#feedAv{ margin-top: -250px !important;transform: scale(0) !important;}</style>
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cyt87u8dh'; 
var conf = 'prod_a47765e6ce7c1e3d3e9e4d17da0c197e'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) {
var head = document.getElementsByTagName('head')[0]||document.head||document.documentElement;
var script = document.createElement('script');
script.type = 'text/javascript';
script.charset = 'utf-8';
script.id = 'changyan_mobile_js';
script.src = 'https://cy-cdn.kuaizhan.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf;
head.appendChild(script);
} else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://cy-cdn.kuaizhan.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
            

            
        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        共 17 篇日志 | 一闪一闪亮晶晶   Powered by 七彩旋律   @2020
    </div>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
            <span id="busuanzi_container_site_uv">总访客人数量<span id="busuanzi_value_site_uv"></span>次</span>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
