<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>phpè¯ä»¶ç…§æ¢åº•è‰² | ä¸ƒå½©æ—‹å¾‹</title>

<link rel="shortcut icon" href="https://mycodemylife.github.io/favicon.ico?v=1597989994592">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://mycodemylife.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            ä¸ƒå½©æ—‹å¾‹
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            é¦–é¡µ
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            å½’æ¡£
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            æ ‡ç­¾
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            å…³äº
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1597989994592" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    phpè¯ä»¶ç…§æ¢åº•è‰²
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2020-08-20 Â·
                    </time>
                    
                        <a href="https://mycodemylife.github.io/tag/EQxUBNp6j/" class="post-tags">
                            # PHP
                        </a>
                    
                </div>
                <div class="post-content">
                    <pre><code class="language-php">&lt;?php
//èƒŒæ™¯å›¾å’ŒåŸå›¾éœ€è¦ä¿æŒå®½é«˜è¦ä¿æŒä¸€æ ·ï¼Œè¿™é‡Œçš„ç¤ºä¾‹åŸå›¾ç”¨çš„æ˜¯è“è‰²èƒŒæ™¯
init();
function init(){
    $old = '1.png';
    $new = '2.png';
    //åˆ›å»ºä¸€ä¸ªpngé€æ˜å›¾
    $img = imagecreatefrompng($old);
    setpng($img,$old,$new);
}
function setpng($imgid,$filename,$savename){
    $bg = 'bg.png';//èƒŒæ™¯å›¾
    $new = imagecreatefrompng($bg);//åˆ›å»ºä¸€ä¸ªpngé€æ˜å›¾
    list($width,$height)=getimagesize($filename);//è·å–é•¿å’Œå®½
    $white = imagecolorallocate($imgid,1,155,215);//é€‰æ‹©ä¸€ä¸ªæ›¿æ¢é¢œè‰²ã€‚è¿™é‡Œæ˜¯ç»¿è‰²
    cleancolor($imgid,$white);
    imagecolortransparent($imgid,$white);//æŠŠé€‰æ‹©çš„é¢œè‰²æ›¿æ¢æˆé€æ˜
    imagecopymerge($new,$imgid,0,0,0,0,$width,$height,100);//åˆå¹¶å›¾ç‰‡
    imagepng($new,$savename);//ä¿å­˜å›¾ç‰‡
    imagedestroy($imgid);//é”€æ¯
    imagedestroy($new);
    echo '&lt;img src=&quot;'.$savename.'&quot;&gt;';
}
function cleancolor($imgid,$color){
    $width = imagesx($imgid);//è·å–å®½
    $height = imagesy($imgid);//è·å–é«˜
    for($i=0;$i&lt;$width;$i++){
        for($k=0;$k&lt;$height;$k++){
            //å¯¹æ¯”æ¯ä¸€ä¸ªåƒç´ 
            $rgb = imagecolorat($imgid,$i,$k);
            $r = ($rgb &gt;&gt; 16)&amp;0xff;//å–R
            $g = ($rgb &gt;&gt; 8)&amp;0xff;//å–G
            $b = $rgb&amp;0xff;//å–B
            $randr = 1.5;
            $randg = 1;
            $randb=1;
            //è“è‰²RGBå¤§è‡´çš„ä½ç½®ã€‚æ›¿æ¢æˆç»¿è‰²
            if($r&lt;=65*$randr &amp;&amp; $g&lt;=225*$randg &amp;&amp; $b&lt;=255*$randb &amp;&amp; $b*$randb&gt;=100){
                //å¦‚æœèƒ½å¤Ÿç²¾ç¡®çš„è®¡ç®—å‡ºè¦ä¿ç•™ä½ç½®çš„ï¼Œè¿™é‡Œå¯ä»¥å†™ç»å¯¹çš„æ•°å­—
                if($i&gt;=$width/2 &amp;&amp; $i&lt;=$width/2 &amp;&amp; $k&gt;=$height/2 &amp;&amp; $k&lt;=$height/2){
                    
                }else{
                    //æ”¹å˜é¢œè‰²
                    imagesetpixel($imgid,$i,$k,$color);
                }
            }
        }
    }
}

$oldæŒ‡çš„æ˜¯è¦å¤„ç†çš„å›¾ç‰‡ï¼ŒæŒ‡å®šä¸ºpngæ ¼å¼
$newæŒ‡çš„æ˜¯å¤„ç†åè¾“å‡ºçš„å›¾ç‰‡å
$bgæŒ‡çš„æ˜¯èƒŒæ™¯å›¾
</code></pre>
<p>ğŸ˜˜ Enjoy~</p>

                </div>
            </article>
        </div>

        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        ä¸€é—ªä¸€é—ªäº®æ™¶æ™¶   Powered by ä¸ƒå½©æ—‹å¾‹   @2020
    </div>
    
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
